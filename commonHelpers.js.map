{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nconst pageForm = document.querySelector(\".form\");\nconst pageLoaderTop = document.querySelector(\".loader-top\");\nconst pageLoaderBottom = document.querySelector(\".loader-bottom\");\nconst pageGallery = document.querySelector(\".gallery\");\nconst pageLoadImg = document.querySelector('.load-image');\n\n\nlet page = 1;\nlet q = \"cat\";\nlet per_page = 40;\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    nav: true,\n    close: true,\n    enableKeyboard: true,\n    docClose: true\n    });\n\npageForm.addEventListener('submit', onSubmit);\npageLoadImg.addEventListener('click', loadMore);\n\nasync function onSubmit(event) {\n    event.preventDefault();\n    pageLoaderTop.style.display = 'block';\n    pageLoadImg.style.display = 'none';\n    page = 1;\n    q = event.target.elements.search.value.trim();\n\n      if (!q) {\n    pageGallery.innerHTML = '';\n    iziToast.info({\n      position: 'topRight',\n      message: 'Error enter any symbols',\n    });\n    pageLoaderTop.style.display = 'none';\n    return;\n    }\n    \n    try {\n    const {\n    data: { hits, totalHits },\n    } = await searchImg(q, page);\n        \n    if (hits.length > 0) {\n    pageLoaderTop.style.display = 'none';\n    pageGallery.innerHTML = renderImg(hits);\n    lightbox.refresh();\n    iziToast.success({\n    position: 'topRight',\n    message: `We found ${totalHits} photos`,\n    });\n    pageLoadImg.style.display = 'block';\n    } else {\n    pageGallery.innerHTML = '';\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n        }\n        \n    if (totalHits <= per_page) {\n      pageLoadImg.style.display = 'none';\n    }\n    } catch (error) {\n        console.log('Error');\n    } finally {\n        pageLoaderTop.style.display = 'none';\n        event.target.reset();\n    }\n}\n\nfunction renderImg(hits = []) {\n  return hits.reduce((html, hit) => {\n    return (\n      html +\n      `<li class=\"gallery-item\">\n        <a href=${hit.largeImageURL}>\n          <img class=\"gallery-img\" src =${hit.webformatURL} alt=${hit.tags}/>\n        </a>\n        <div class=\"gallery-text-box\">\n          <p>Likes: <span class=\"text-value\">${hit.likes}</span></p>\n          <p>views: <span class=\"text-value\">${hit.views}</span></p>\n          <p>comments: <span class=\"text-value\">${hit.comments}</span></p>\n          <p>downloads: <span class=\"text-value\">${hit.downloads}</span></p>\n      </div>\n      </li>`\n    );\n  }, '');\n}\n\nasync function loadMore(event) {\n  pageLoaderBottom.style.display = 'block';\n  loadImg.style.display = 'none';\n  const listItem = document.querySelector('.gallery-item:first-child');\n  const itemHeight = listItem.getBoundingClientRect().height;\n\n  try {\n    page += 1;\n\n    const {\n      data: { hits, totalHits },\n    } = await searchImg(q, page);\n    const totalPage = Math.ceil(totalHits / per_page);\n\n    pageLoadImg.style.display = 'block';\n    pageGallery.insertAdjacentHTML('beforeend', renderImg(hits));\n    lightbox.refresh();\n\n    if (page === totalPage) {\n      pageLoadImg.style.display = 'none';\n      return iziToast.info({\n        position: 'topRight',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    pageLoaderBottom.style.display = 'none';\n    window.scrollBy({\n      top: 2 * itemHeight,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["pageForm","pageLoaderTop","pageLoaderBottom","pageGallery","pageLoadImg","page","q","per_page","lightbox","SimpleLightbox","onSubmit","loadMore","event","iziToast","hits","totalHits","renderImg","html","hit","itemHeight","totalPage","error"],"mappings":"6vBAMA,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAgB,SAAS,cAAc,aAAa,EACpDC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAc,SAAS,cAAc,aAAa,EAGxD,IAAIC,EAAO,EACPC,EAAI,MACJC,EAAW,GAEf,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,IAAK,GACL,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAK,EAELT,EAAS,iBAAiB,SAAUU,CAAQ,EAC5CN,EAAY,iBAAiB,QAASO,CAAQ,EAE9C,eAAeD,EAASE,EAAO,CAOzB,GANFA,EAAM,eAAc,EACpBX,EAAc,MAAM,QAAU,QAC9BG,EAAY,MAAM,QAAU,OAC5BC,EAAO,EACPC,EAAIM,EAAM,OAAO,SAAS,OAAO,MAAM,OAEjC,CAACN,EAAG,CACVH,EAAY,UAAY,GACxBU,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,yBACf,CAAK,EACDZ,EAAc,MAAM,QAAU,OAC9B,MACC,CAED,GAAI,CACJ,KAAM,CACN,KAAM,CAAE,KAAAa,EAAM,UAAAC,CAAW,CACxB,EAAG,MAAM,UAAUT,EAAGD,CAAI,EAEvBS,EAAK,OAAS,GAClBb,EAAc,MAAM,QAAU,OAC9BE,EAAY,UAAYa,EAAUF,CAAI,EACtCN,EAAS,QAAO,EAChBK,EAAS,QAAQ,CACjB,SAAU,WACV,QAAS,YAAYE,UACzB,CAAK,EACDX,EAAY,MAAM,QAAU,UAE5BD,EAAY,UAAY,GACtBU,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,GAGCE,GAAaR,IACfH,EAAY,MAAM,QAAU,OAE7B,MAAC,CACE,QAAQ,IAAI,OAAO,CAC3B,QAAc,CACNH,EAAc,MAAM,QAAU,OAC9BW,EAAM,OAAO,OAChB,CACL,CAEA,SAASI,EAAUF,EAAO,GAAI,CAC5B,OAAOA,EAAK,OAAO,CAACG,EAAMC,IAEtBD,EACA;AAAA,kBACYC,EAAI;AAAA,0CACoBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,+CAGvBA,EAAI;AAAA,+CACJA,EAAI;AAAA,kDACDA,EAAI;AAAA,mDACHA,EAAI;AAAA;AAAA,aAIlD,EAAE,CACP,CAEA,eAAeP,EAASC,EAAO,CAC7BV,EAAiB,MAAM,QAAU,QACjC,QAAQ,MAAM,QAAU,OAExB,MAAMiB,EADW,SAAS,cAAc,2BAA2B,EACvC,sBAAqB,EAAG,OAEpD,GAAI,CACFd,GAAQ,EAER,KAAM,CACJ,KAAM,CAAE,KAAAS,EAAM,UAAAC,CAAW,CAC1B,EAAG,MAAM,UAAUT,EAAGD,CAAI,EACrBe,EAAY,KAAK,KAAKL,EAAYR,CAAQ,EAMhD,GAJAH,EAAY,MAAM,QAAU,QAC5BD,EAAY,mBAAmB,YAAaa,EAAUF,CAAI,CAAC,EAC3DN,EAAS,QAAO,EAEZH,IAASe,EACX,OAAAhB,EAAY,MAAM,QAAU,OACrBS,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,4DACjB,CAAO,CAEJ,OAAQQ,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRnB,EAAiB,MAAM,QAAU,OACjC,OAAO,SAAS,CACd,IAAK,EAAIiB,EACT,SAAU,QAChB,CAAK,CACF,CACH"}